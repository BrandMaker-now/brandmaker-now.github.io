<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>API版 座標特定ツール</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
        #video-wrapper { width: 100%; height: 100%; position: relative; }
        /* 動画の上に透明なクリック検知レイヤーを重ねる */
        #click-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; cursor: crosshair; }
    </style>
</head>
<body>
    <div id="video-wrapper">
        <!-- APIが動画を生成するためのID付きの箱 -->
        <div id="player"></div>
        <!-- クリックを検知するための透明な層 -->
        <div id="click-layer"></div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;

        // 1. YouTube APIの準備ができたら動画を生成
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: 'uX8g9pbRnIA', // このIDで動画を読み込む
                playerVars: {
                    'start': 55, 'controls': 0, 'modestbranding': 1, 'rel': 0,
                    'origin': window.location.protocol + '//' + window.location.hostname
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            // 動画再生開始
            event.target.playVideo();
            alert("動画が表示されたら、建物をクリックしてください。\n座標(top/left %)がF12キーで開く『Console』タブに表示されます。");
        }

        // 2. クリックイベントを検知して座標を計算
        document.getElementById('click-layer').addEventListener('click', function(event) {
            const videoWrapper = document.getElementById('video-wrapper');
            const rect = videoWrapper.getBoundingClientRect();
            
            const x = ((event.clientX - rect.left) / rect.width) * 100;
            const y = ((event.clientY - rect.top) / rect.height) * 100;
            
            console.log(`桜島/建物の位置 top: ${y.toFixed(2)}%, left: ${x.toFixed(2)}%`);
            alert(`座標をコンソールに出力しました。\ntop: ${y.toFixed(2)}%, left: ${x.toFixed(2)}%`);
        });
    </script>
</body>
</html>
